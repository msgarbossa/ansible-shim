---

- name: Playbook for testing simple Ansible modules
  hosts: localhost
  become: false
  gather_facts: false
  connection: local

  tasks:

    # - name: Collect facts
    #   ansible.builtin.setup:
    #     gather_subset:
    #       - 'all'

    # This command is sensitive to Python's subprocess module's communicate method because
    # Ansible's pause access stdin to prompt.
    - name: Pause for 2 seconds using pause module
      ansible.builtin.pause:
        seconds: 2

    # Test sleeping 2 seconds
    - name: Pause for 2 seconds using wait_for module
      ansible.builtin.wait_for:
        timeout: 2
      connection: local

    # This can be used to test lines of output greater than the stdout buffer size
    # to truncate extremely long lines.
    # - name: Slurp large file
    #   ansible.builtin.slurp:
    #     # src: ../out/ansible-shim-v0.1.1-4-g0c25120-linux-amd64
    #     src: /app/out/ansible-shim-v0.1.1-4-g0c25120-linux-amd64
    #   register: slurped
